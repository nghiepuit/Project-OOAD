@using QuanLyLinhKienMayTinh.Common.ViewModels
@model IEnumerable<ThongKeDoanhThuLoiNhuan>
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";

    string TuNgay = Request["TuNgay"];
    string DenNgay = Request["DenNgay"];
    DateTime rs;
    if (!DateTime.TryParse(TuNgay, out rs))
    {
        TuNgay = "";
    }
    if (!DateTime.TryParse(DenNgay, out rs))
    {
        DenNgay = "";
    }
}

<style>
    .cascading-admin-card .admin-up {
        margin-left: 4%;
        margin-right: 4%;
        margin-top: -20px;
    }

        .cascading-admin-card .admin-up .fa {
            padding: 1.7rem;
            font-size: 2rem;
            color: #fff;
            text-align: left;
            border-radius: 3px;
            -webkit-box-shadow: 0 8px 17px 0 rgba(0,0,0,.2), 0 6px 20px 0 rgba(0,0,0,.19);
            box-shadow: 0 8px 17px 0 rgba(0,0,0,.2), 0 6px 20px 0 rgba(0,0,0,.19);
        }

        .cascading-admin-card .admin-up .data {
            float: right;
            margin-top: 2rem;
            text-align: right;
        }
</style>

<section class="mt-lg-5">

    <!--Grid row-->
    <div class="row">

        <!--Grid column-->
        <div class="col-xl-3 col-md-6 mb-r">

            <!--Card-->
            <div class="card card-cascade cascading-admin-card">

                <!--Card Data-->
                <div class="admin-up">
                    <i class="fa fa-eye primary-color"></i>
                    <div class="data">
                        <h3 class="font-bold dark-grey-text">@ViewBag.SoNguoiDangOnline</h3>
                    </div>
                </div>
                <!--/.Card Data-->
                <!--Card content-->
                <div class="card-body">
                    <div class="progress">
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <!--Text-->
                    <p class="card-text">Số Người Trực Tuyến</p>
                </div>
                <!--/.Card content-->
            </div>
            <!--/.Card-->
        </div>
        <!--Grid column-->
        <!--Grid column-->
        <div class="col-xl-3 col-md-6 mb-r">

            <!--Card-->
            <div class="card card-cascade cascading-admin-card">

                <!--Card Data-->
                <div class="admin-up">
                    <i class="fa fa-group warning-color"></i>
                    <div class="data">
                        <h4 class="font-bold dark-grey-text">@ViewBag.SoNguoiTruyCap</h4>
                    </div>
                </div>
                <!--/.Card Data-->
                <!--Card content-->
                <div class="card-body">
                    <div class="progress">
                        <div class="progress-bar red accent-2" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <!--Text-->
                    <p class="card-text">Số Người Truy Cập</p>
                </div>
                <!--/.Card content-->
            </div>
            <!--/.Card-->
        </div>
        <!--Grid column-->
        <!--Grid column-->
        <div class="col-xl-3 col-md-6 mb-r">

            <!--Card-->
            <div class="card card-cascade cascading-admin-card">

                <!--Card Data-->
                <div class="admin-up">
                    <i class="fa fa-money light-blue lighten-1"></i>
                    <div class="data">
                        <h5 class="font-bold dark-grey-text">
                            @ViewBag.TongDoanhThu.ToString("N0") đ
                        </h5>
                    </div>
                </div>
                <!--/.Card Data-->
                <!--Card content-->
                <div class="card-body">
                    <div class="progress">
                        <div class="progress-bar red accent-2" role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <!--Text-->
                    <p class="card-text">Doanh Thu</p>
                </div>
                <!--/.Card content-->
            </div>
            <!--/.Card-->
        </div>
        <!--Grid column-->
        <!--Grid column-->
        <div class="col-xl-3 col-md-6 mb-r">

            <!--Card-->
            <div class="card card-cascade cascading-admin-card">

                <!--Card Data-->
                <div class="admin-up">
                    <i class="fa fa-user red accent-2"></i>
                    <div class="data">
                        <h4 class="font-bold dark-grey-text">@ViewBag.TongThanhVien</h4>
                    </div>
                </div>
                <!--/.Card Data-->
                <!--Card content-->
                <div class="card-body">
                    <div class="progress">
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <!--Text-->
                    <p class="card-text">Số Lượng Thành Viên</p>
                </div>
                <!--/.Card content-->
            </div>
            <!--/.Card-->
        </div>
        <!--Grid column-->
    </div>
    <!--Grid row-->
</section>

@using (Html.BeginForm("", "ThongKe", FormMethod.Get))
{
    <div class="row">
        <div class="col-lg-3 col-md-12">
            <div class="md-form">
                <input name="TuNgay" value="@TuNgay" type="text" class="form-control datepicker" placeholder="Từ ngày:">
            </div>
        </div>
        <div class="col-lg-3 col-md-12">
            <div class="md-form">
                <input name="DenNgay" value="@DenNgay" type="text" class="form-control datepicker" placeholder="Đến ngày:">
            </div>
        </div>
        <div class="col-lg-3 col-md-12">
            <div class="md-form">
                <button class="btn btn-primary"><i class="fa fa-search"></i>  </button>
            </div>
        </div>
    </div>
}

<div class="row">
    <div class="col-md-12 text-center">
        <table class="table table-bordered">
            <tr>
                <th>Ngày</th>
                <th>Doanh Thu</th>
                <th>Lợi Nhuận</th>
            </tr>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Ngay.ToString("dd/MM/yyyy")</td>
                    <td>@item.DoanhThu.ToString("N0") đ</td>
                    <td>@item.LoiNhuan.ToString("N0") đ</td>
                </tr>
            }
        </table>
    </div>
</div>

<canvas id="lineChart"></canvas>
@section ClientScripts{
    <script>
        //line
        var ctxL = document.getElementById("lineChart").getContext('2d');
        var myLineChart = new Chart(ctxL, {
            type: 'line',
            data: {
                labels: [],
                datasets: [
                    {
                        label: "My First dataset",
                        fillColor: "rgba(220,220,220,0.2)",
                        strokeColor: "rgba(220,220,220,1)",
                        pointColor: "rgba(220,220,220,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(220,220,220,1)",
                        data: [65, 59, 80, 81, 56, 55, 40]
                    },
                    {
                        label: "My Second dataset",
                        fillColor: "rgba(151,187,205,0.2)",
                        strokeColor: "rgba(151,187,205,1)",
                        pointColor: "rgba(151,187,205,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(151,187,205,1)",
                        data: [28, 48, 40, 19, 86, 27, 90]
                    }
                ]
            },
            options: {
                responsive: true
            }
        });
    </script>
}