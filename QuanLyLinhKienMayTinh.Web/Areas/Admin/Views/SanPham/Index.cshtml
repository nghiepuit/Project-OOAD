@model QuanLyLinhKienMayTinh.Web.Infrastructure.Core.PaginationSet<QuanLyLinhKienMayTinh.Entities.SanPham>

@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<h2 class="text-danger text-center">Danh Sách Sản Phẩm</h2>

<p>
    <a href="/Admin/PhieuNhap/TaoMoi" class="btn btn-success">
        <i class="fa fa-plus"></i>
        Thêm Sản Phẩm
    </a>
</p>
<table class="table table-bordered">
    <tr>
        <th>
            Hình Ảnh
        </th>
        <th>
            Thời Gian Đăng
        </th>
        <th>
            Đơn Giá
        </th>
        <th>
            Lượt Xem
        </th>
        <th>
            Tồn Kho
        </th>
        <th>
            Đã Bán
        </th>
        <th>
            Trạng Thái
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model.Items)
    {
        <tr>
            <td>
                <a href="/Admin/SanPham/ChinhSua/@item.MaSP">
                    <img src="~/Assets/images/SanPham/@item.HinhAnh" width="150" height="150" />
                </a>
            </td>
            <td>
                @item.NgayCapNhat
            </td>
            <td>
                @item.DonGia
            </td>
            <td>
                @item.LuotXem
            </td>
            <td>
                @item.SoLuongTon
            </td>
            <td>
                @item.SoLanMua
            </td>
            <td>
                @if (item.DaXoa == true)
                {
                    <span class="label label-danger">
                        Đã Xóa
                    </span>
                }
                else
                {
                    <span class="label label-primary">
                        Đang Bán
                    </span>
                }
            </td>
            <td>
                <a href="/Admin/SanPham/ChinhSua/@item.MaSP" class="btn btn-warning btn-sm">
                    <i class="fa fa-pencil"></i>
                </a>
                <a href="/Admin/SanPham/Xoa/@item.MaSP" class="btn btn-danger btn-sm" onclick="return confirm('Bạn chắc chắn muốn xóa ?')">
                    <i class="fa fa-trash"></i>
                </a>
            </td>
        </tr>
    }
</table>
@if (Model.TotalPages > 1)
{
    var startPageIndex = Math.Max(1, Model.PageIndex - Model.MaxPage / 2);
    var endPageIndex = Math.Min(Model.TotalPages, Model.PageIndex + Model.MaxPage / 2);
    <!--Pagination -->
    <nav class="my-4 pull-right">
        <ul class="pagination pagination-circle pg-blue mb-0">
            @if (Model.PageIndex > 1)
            {
                <!--First-->
                <li class="page-item"><a href="?page=1" class="page-link">Trang Đầu</a></li>
                <!--Arrow left-->
                <li class="page-item disabled">
                    <a class="page-link" aria-label="Previous" href="?page=@(Model.PageIndex-1)">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
            }

            <!--Numbers-->
            @for (int i = startPageIndex; i <= endPageIndex; i++)
            {
                if (Model.PageIndex == i)
                {
                    <li class="page-item active"><a href="?page=@i" class="page-link">@i</a></li>
                }
                else
                {
                    <li class="page-item"><a href="?page=@i" class="page-link">@i</a></li>
                }
            }

            @if (Model.PageIndex < Model.TotalPages)
            {
                <!--Arrow right-->
                <li class="page-item">
                    <a href="?page=@(Model.PageIndex+1)" class="page-link" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>

                <!--First-->
                <li class="page-item"><a href="?page=@Model.TotalPages" class="page-link">Trang Cuối</a></li>
            }
        </ul>
    </nav>
    <!--/Pagination -->
}